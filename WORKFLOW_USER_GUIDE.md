# 📚 Article Generation Workflow ユーザーガイド

## 🎯 このワークフローの目的

高品質なSEO記事を**完全自動**で生成するGitHub Actionsワークフローです。
人間のライターが1週間かけて作る品質の記事を、約30-45分で生成します。

---

## 🚀 使い方（超簡単！）

### 両ワークフロー共通の使い方
1. GitHub Actions → ワークフローを選択
   - **v4**: 特定サロン専用版
   - **v4-free**: 汎用版（どんなサイトでも使用可）
2. 4つの項目を入力：
   - **タイトル案**（30〜32文字）
   - **主要キーワード**（最大3語、カンマ区切り）
   - **切り口・ターゲット**（誰に向けて、どんな視点で）
   - **E-E-A-T要素**（専門性・経験・権威性・信頼性）
3. 「Run workflow」をクリック
4. 30-45分待つだけ！

---

## 🔄 記事生成のフロー

### 実際のジョブ構成（全10ジョブ）
1. **initialize** - 初期化とID生成
2. **analysis** - Phase 1: リクエスト分析
3. **research** - Phase 2-1: リサーチ実行
4. **research-merge** - Phase 2-2: リサーチ結果統合
5. **generate-structure** - Phase 3: 記事構造設計
6. **generate-content** - Phase 4: 記事執筆
7. **factcheck** - Phase 5-1: ファクトチェック
8. **generate-seo-meta** - Phase 5-2: SEOメタ生成
9. **generate-images** - （オプション：通常OFF）画像生成
10. **finalize** - Phase 6: 最終調整

### ユーザー視点での主要6フェーズ

### 📊 Phase 1: リクエスト分析（5分）
**何をしているか**：
- 入力された情報から記事の方向性を決定
- ターゲットペルソナの詳細設定
- SEO戦略の立案

**品質の秘密**：
- AIが自動でペルソナの悩みや検索意図を深掘り
- 競合分析を考慮した差別化ポイントを設定

---

### 🔍 Phase 2: リサーチ（10分）+ リサーチマージ（2分）
**何をしているか**：
- Gemini APIでリアルタイムWeb検索（15-25クエリ）
- 信頼性の高い情報源を優先的に収集
  1. 政府機関（.go.jp）
  2. 学術機関（.ac.jp）
  3. 医学会・専門団体
  4. 大手メディア

**品質の秘密**：
- 一次情報を重視した情報収集
- 各情報に信頼性スコア（1-10）を付与
- 最新の統計データや研究結果を取得

---

### 📝 Phase 3: 記事構造設計（5分）
**何をしているか**：
- リサーチ結果を基に最適な記事構成を作成
- セクションごとの文字数配分を決定
- 内部リンク・外部リンク戦略を計画

**品質の秘密**：
- 読者の疑問が自然に解決される論理的な流れ
- E-E-A-T要素を各セクションに配置
- キーワードの自然な配置計画

---

### ✍️ Phase 4: 記事執筆（10分）
**何をしているか**：
- 3200±300文字の本格的な記事を生成
- HTML形式で構造化されたコンテンツ作成
- 画像配置位置の指定

**品質の秘密**：
- ペルソナに最適化された文体・表現
- 専門用語は分かりやすく解説
- 具体例や統計データを豊富に使用
- FAQセクションで読者の疑問を先回り解決

---

### ✅ Phase 5: ファクトチェック（5分）+ SEOメタ生成（3分）
**何をしているか**：
- 記事内の全ての事実関係を検証
- 薬機法・景表法への準拠確認
- 品質スコアの算出（目標: 90点以上）
- メタディスクリプション生成
- SEOキーワード分析

**品質の秘密**：
- リサーチ結果との照合
- 誇大表現や曖昧表現の排除
- 法的リスクの事前チェック
- 検索結果でのCTR向上を意識したメタ情報

---

### 🎨 Phase 6: 最終調整（5分）
**何をしているか**：
- 全成果物の統合と検証
- 最終品質チェック（目標: 85点以上）
- 成果物説明書の作成
- GitHub Artifactsへのアップロード

**品質の秘密**：
- 全フェーズの成果物が揃っているか確認
- 記事の一貫性チェック
- 使用ガイドの作成で即座に使える状態に

---

### 🖼️ オプション: 画像生成機能について
**注意**: 画像生成ジョブは存在しますが、デフォルトではOFFになっています。
- ワークフロー実行時に「enable_image_generation」をtrueにすると有効化
- Gemini Imagen APIを使用（追加コストが発生）
- 現在は試験的機能として実装

---

## 📈 品質管理のポイント

### 🏆 なぜ高品質な記事が作れるのか？

1. **多層的な品質チェック**
   - 各フェーズで品質スコアを算出
   - 基準値を下回ったら自動修正

2. **信頼できる情報源**
   - リアルタイムWeb検索で最新情報を取得
   - 政府・学術機関の一次情報を優先

3. **E-E-A-T重視**
   - Googleの品質評価基準に完全準拠
   - 専門性と信頼性を数値化して管理

4. **読者ファースト**
   - ペルソナの検索意図を深く理解
   - 悩みを解決する実用的な内容

5. **法的コンプライアンス**
   - 薬機法・景表法の自動チェック
   - リスクのある表現を事前に排除

---

## 📊 生成される成果物

### 最終的に得られる5つのファイル

1. **final_article.html**
   - 完成した記事（HTML形式）
   - WordPressに直接貼り付け可能

2. **research_results.json**
   - リサーチ結果と出典URL
   - 信頼性スコア付き

3. **factcheck_report.json**
   - ファクトチェック結果
   - 品質スコア（0-100点）

4. **seo_metadata.json**
   - SEOメタ情報
   - キーワード分析結果

5. **deliverables_summary.md**
   - 成果物の説明書
   - 使用方法ガイド

---

## ⚡ ワークフローの違い

### v4（特定サロン専用版）
- **用途**: ホットペッパービューティー掲載の特定サロン向け
- **CTA**: 固定URL（https://beauty.hotpepper.jp/kr/slnH000618948/）
- **HTML装飾**: サロンサイトに最適化されたスタイル
- **品質基準**: E-E-A-T重視、ファクトチェックスコア90点以上

### v4-free（汎用版）
- **用途**: どんなWordPressサイトでも使用可能
- **CTA**: カスタマイズ可能（任意のURLを設定可）
- **HTML装飾**: ARTICLE-TEMPLATE-README.md準拠の汎用的なクラス名
- **品質基準**: v4と同等（E-E-A-T重視、ファクトチェックスコア90点以上）

### 共通の特徴
- **処理時間**: 約30-45分
- **記事品質**: 両方とも同じ高品質基準
- **リサーチ**: Gemini APIによる15-25クエリの実Web検索
- **文字数**: 3200±300文字
- **コスト**: 約$0.60/記事（両方同じ）

---

## 💡 成功のコツ

### 良い記事を作るための入力のポイント

1. **明確なタイトル**
   - 読者の悩みや疑問を含める
   - 数字を使うと効果的（例：「5つの方法」）

2. **適切なキーワード選定**
   - メインキーワード1つ + サブキーワード2つまで
   - 検索ボリュームを事前にチェック

3. **具体的なターゲット設定**
   - 年齢、性別、悩みを明確に
   - 例：「30代女性、肌の乾燥に悩む」

4. **E-E-A-T要素の明記**
   - 記事の権威性を示す要素
   - 例：「皮膚科医監修、10年の臨床経験」

---

## 🔧 トラブルシューティング

### よくある質問

**Q: v4とv4-freeのどちらを使うべき？**
A: 特定サロン（slnH000618948）の記事ならv4、それ以外のサイトならv4-freeを使用してください。

**Q: 両方のワークフローで品質に差はある？**
A: ありません。全く同じ品質の記事が生成されます。違いはCTAのURLと一部のHTML装飾のみです。

**Q: 記事生成に失敗した場合は？**
A: GitHub Actionsのログを確認し、エラー箇所を特定してください。多くの場合、API制限かタイムアウトが原因です。

**Q: 生成時間が長すぎる場合は？**
A: 通常30-45分ですが、リサーチクエリが多い場合は最大60分かかることがあります。

**Q: 品質スコアが低い場合は？**
A: 入力パラメータを見直し、より具体的な情報を提供してください。

**Q: v4-freeでCTAのURLを変更したい場合は？**
A: 生成後のHTMLファイル内の`【適切なURL】`を任意のURLに置換してください。

---

## 📞 サポート

問題が発生した場合は、GitHubのIssuesで報告してください。

---

**最終更新**: 2025年1月21日  
**バージョン**: v4.0