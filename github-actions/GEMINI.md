# Gemini プロジェクトガイドライン

## プロジェクト概要
このプロジェクトでは、GeminiをSEO記事生成システムのWeb検索エンジンとして使用します。信頼性の高い最新情報を収集し、ファクトチェック可能な記事作成を支援します。

## Geminiの役割

### 1. Web検索（フェーズ2）
- **目的**: 記事トピックに関する信頼性の高い最新情報の収集
- **検索数**: 15-25クエリ/記事
- **使用ツール**: `web_search` (Google Search grounding)

### 2. 画像生成（フェーズ8）
- **目的**: 記事に適したビジュアルコンテンツの生成
- **使用モデル**: Imagen
- **生成数**: 5-6枚/記事

## Web検索の優先順位

### 情報源の信頼性ランク
1. **最優先（very_high）**
   - 政府機関: `.go.jp`, `.gov`
   - 特に: 厚生労働省(mhlw.go.jp)、医薬品医療機器総合機構(pmda.go.jp)

2. **高優先（high）**
   - 学術機関: `.ac.jp`, `.edu`
   - 医学会・学会サイト
   - 研究機関・研究所

3. **中優先（medium_high）**
   - 業界団体・協会
   - 大手メディア: NHK、日経新聞
   - 専門メディア

4. **中（medium）**
   - 一般メディア
   - 企業公式サイト

## 検索クエリの構成

### 必須クエリタイプ
```
1. 基本情報: "{トピック} とは"
2. 最新情報: "{トピック} 最新 2025"
3. 統計データ: "{トピック} 統計 データ"
4. 専門家意見: "{トピック} 専門家 見解"
5. 注意事項: "{トピック} 注意点 リスク"
6. 政府見解: "{トピック} 厚生労働省"
```

### 健康・美容記事の場合
```
7. 科学的根拠: "{トピック} 研究結果 エビデンス"
8. 副作用・リスク: "{トピック} 副作用 安全性"
9. 適応・禁忌: "{トピック} 適応 禁忌"
```

## 出力形式

### Web検索結果のJSON構造
```json
{
  "query": "検索クエリ",
  "results": [
    {
      "url": "実際のURL",
      "title": "ページタイトル",
      "source_type": "government/academic/medical/industry/media",
      "reliability_score": 1-10,
      "key_findings": ["重要な発見1", "重要な発見2"],
      "publication_date": "2025-01-24",
      "relevant_quote": "正確な引用文"
    }
  ],
  "grounding_metadata": {
    "search_queries": ["実行されたクエリ"],
    "total_results": 10
  }
}
```

## 品質基準

### 検索結果の評価基準
1. **信頼性スコア（1-10）**
   - 10: 政府機関の公式発表
   - 9: 学術論文・研究機関
   - 8: 医学会・専門団体
   - 7: 大手メディア（NHK等）
   - 6: 業界団体
   - 5以下: 一般サイト

2. **情報の新しさ**
   - 1年以内: 最優先
   - 2-3年: 許容範囲
   - 3年以上: 参考程度

3. **引用可能性**
   - 具体的な数値データ
   - 専門家の実名コメント
   - 公式発表・ガイドライン

## エラーハンドリング

### よくあるエラーと対処
1. **検索結果なし**
   - クエリを言い換えて再検索
   - 類義語・関連語で検索

2. **信頼できる情報源が少ない**
   - 英語での検索も実行
   - 学術データベース指定検索

3. **矛盾する情報**
   - 複数の信頼できる情報源を比較
   - 最新かつ権威ある情報を優先

## パフォーマンス設定

### API使用の最適化
- **温度設定**: 1.0（grounding推奨値）
- **最大トークン**: 2048（検索結果用）
- **タイムアウト**: 60秒/クエリ
- **レート制限**: 2秒間隔/クエリ

### バッチ処理
- **バッチサイズ**: 5クエリ
- **並列実行**: なし（順次実行）
- **リトライ**: 最大3回

## セキュリティとプライバシー

### 検索時の注意事項
1. 個人情報を含むクエリは避ける
2. 機密情報・企業秘密は検索しない
3. 医療アドバイスと誤解される表現を避ける

### データの取り扱い
1. 検索結果は一時的に保存
2. 個人を特定できる情報は除外
3. 引用時は出典を明記

## 画像生成ガイドライン

### Imagenプロンプトの構成
```
1. スタイル: "professional, clean, minimalist"
2. カラー: "soft pastel colors, calming"  
3. 禁止事項: "no text, no logos, no watermarks"
4. 用途: "health and wellness blog article"
```

### 画像タイプ別設定
- **ヒーロー画像**: 16:9, 横長, インパクト重視
- **セクション画像**: 4:3, 説明的, 情報伝達重視
- **図解**: シンプル, 分かりやすさ重視

## コミュニケーション

### エラー報告形式
```
[ERROR] Phase: {フェーズ名}
Query: {実行したクエリ}
Error: {エラー内容}
Action: {対処法}
```

### 成功報告形式
```
[SUCCESS] Research completed
- Total queries: {数}
- Successful: {数}
- High-priority sources: {数}
- Execution time: {秒}s
```

---

このガイドラインに従って、高品質で信頼性の高い情報収集を実現します。