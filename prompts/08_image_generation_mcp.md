# 画像生成（MCP + Imagen4）

あなたのタスクは、記事内容を理解し、適切な画像を生成することです。

## 入力ファイル

1. `02_article_structure.md` - 記事構造
2. `04_optimized_draft.html` - 最適化された記事本文
3. `06_optimized_seo_content.html` - SEO最適化後の最終記事

## タスク

### 1. 記事内容の分析

まず、以下のファイルを読み込んで記事の内容を完全に理解してください：
- 記事のメインテーマ
- 各セクションの内容
- ターゲット読者
- 記事のトーンとスタイル

### 2. 画像生成計画の作成

以下の画像を生成してください：

#### a. ヒーロー画像（1枚）
- **用途**: 記事のトップに配置
- **アスペクト比**: 16:9
- **内容**: 記事全体のテーマを視覚的に表現
- **スタイル**: プロフェッショナルで信頼感のある、明るく清潔な印象

#### b. セクション画像（最大4枚）
- **用途**: 主要セクションのビジュアル補完
- **アスペクト比**: 4:3
- **内容**: 各セクションの内容を具体的に表現
- **スタイル**: 統一感のある、分かりやすいビジュアル

### 3. プロンプトの最適化

各画像のプロンプトを作成する際、以下の点に注意してください：

1. **具体的な視覚要素の記述**
   - 色彩（例：「明るいパステルカラー」「清潔感のある白と青」）
   - 構図（例：「中央配置」「三分割構図」）
   - 照明（例：「自然光」「ソフトな照明」）

2. **健康・美容記事に適した表現**
   - 薬機法・景表法に配慮
   - 誇大な効果を示唆しない
   - 科学的で信頼できる印象

3. **避けるべき要素**
   - テキストやロゴ
   - 特定のブランド名や製品
   - 医療行為を想起させる表現
   - Before/Afterのような比較画像

### 4. 画像生成の実行

MCPサーバーの `mcp__gemini-imagen__generate_image` ツールを使用して画像を生成してください。

```
使用例：
1. まず利用可能なモデルを確認
   mcp__gemini-imagen__list_models()

2. 画像を生成
   mcp__gemini-imagen__generate_image(
     prompt="詳細なプロンプト",
     model="imagen-4",
     aspect_ratio="16:9"
   )
```

### 5. 画像の保存とメタデータ作成

生成された画像を以下の形式で保存してください：

**ファイル名規則**:
- ヒーロー画像: `hero_image.png`
- セクション画像: `section_1_image.png`, `section_2_image.png`, など

**保存先**: 現在のディレクトリの `images/` フォルダ

**メタデータファイル** (`images/metadata.json`):
```json
{
  "generated_at": "2025-07-28T10:00:00Z",
  "generator": "imagen-4-mcp",
  "images": [
    {
      "filename": "hero_image.png",
      "type": "hero",
      "prompt": "使用したプロンプト",
      "aspect_ratio": "16:9",
      "section": null
    },
    {
      "filename": "section_1_image.png",
      "type": "section",
      "prompt": "使用したプロンプト",
      "aspect_ratio": "4:3",
      "section": "セクションタイトル"
    }
  ]
}
```

### 6. エラーハンドリング

もし画像生成に失敗した場合：
1. エラーの詳細をログに記録
2. プロンプトを調整して再試行（最大3回）
3. それでも失敗する場合は、その画像をスキップして続行

## 重要な注意事項

1. **著作権とライセンス**: 生成される画像は商用利用可能であることを確認
2. **品質チェック**: 生成された画像が記事内容と一致しているか確認
3. **ファイルサイズ**: 画像は適切に最適化されていることを確認（通常は1MB以下）

## 期待される出力

1. 5枚の高品質な画像（hero x1, sections x4）
2. `metadata.json` ファイル
3. 生成プロセスのサマリーレポート

画像生成が完了したら、生成された画像の枚数と保存先を報告してください。